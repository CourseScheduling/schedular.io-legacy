CORE={helper:{},main:{sort:{},input:{},dropDown:{}},chosen:{add:{}}};CORE.helper.element=function(b){return{changeStyle:function(d,a){for(var c in a)d.style[c]=a[c]},create:function(d,a){var c=document.createElement(d);void 0!==a.html&&(c.innerHTML=a.html,delete a.html);for(var b in a)c.setAttribute(b,a[b]);return c}}}(CORE);
CORE.main.sort=function(b){return function(b,a){function c(a,b,c){a+="";b+="";if(0>=b.length)return a.length+1;var d=0,f=0;for(c=c?1:b.length;;)if(f=a.indexOf(b,f),0<=f)++d,f+=c;else break;return d}b.sort(function(b,d){for(var k=0,e=0,f=a.split(" "),l=f.length;l--;)k+=c(b.tags,f[l]),e+=c(d.tags,f[l]);return k-e});return b}}(CORE);
CORE.main.input=function(b){var d=document.getElementById("courseInput"),a=document.getElementById("instantDropDown");d.addEventListener("keyup",function(c){if(""==c.target.value)return Velocity(a,"slideUp",50);$.get({url:"/g/course?term="+b.main.term.currentTerm+"&year="+b.main.term.currentYear+"&q="+c.target.value,done:function(h){if(0==h.length)Velocity(a,"slideUp",50);else{h=b.main.sort(h,c.target.value);for(var g=b.helper.element.create;a.children.length;)a.removeChild(a.children[0]);h.every(function(c,
e,f){if(5<=e)return!1;e=g("div",{"class":"instant-resultContainer"});e.appendChild(g("strong",{"class":"instant-resultCourseName",html:c.name}));e.appendChild(g("span",{"class":"instant-resultCourseCode",html:c.code}));a.appendChild(e);e.addEventListener("click",function(){b.main.chosen.add(c.code);d.value=""});return!0});"none"==a.style.display&&0<h.length&&Velocity(a,"slideDown",50)}}})});return{flush:function(){var a=document.getElementById("instantDropDown");Velocity(a,"slideUp",50)}}}(CORE);
CORE.main.chosen=function(b){var d=[];return{list:d,add:function(a){if(-1<d.indexOf(a))return b.main.input.flush();d.push(a);b.main.input.flush();b.main.chosen.addButton(a);localStorage.courseCache=b.main.chosen.genQuery()},addButton:function(a){var c=b.helper.element.create,d=c("li",{"class":"courseChoice-wrap","data-code":a}),g=c("div",{"class":"courseChoice",html:a}),c=c("div",{"class":"courseKill"});b.helper.element.changeStyle(g,{backgroundColor:randomColor({luminosity:"bright",format:"hex",
seed:parseInt(a,36)%1E5})});c.addEventListener("click",function(){b.main.chosen.killButton(a)});g.appendChild(c);d.appendChild(g);document.getElementById("courseChoiceContainer").appendChild(d)},killButton:function(a){var c=document.querySelectorAll('[data-code="'+a+'"]')[0];c.parentNode.removeChild(c);d.splice(d.indexOf(a),1);localStorage.courseCache=b.main.chosen.genQuery()},genQuery:function(){return d.join("|")}}}(CORE);
CORE.main.init=function(b){document.getElementById("scheduleCreate").addEventListener("click",function(){localStorage.courseCache=b.main.chosen.genQuery();document.location="/s/show?c="+b.main.chosen.genQuery()});void 0!=localStorage.courseCache&&""!=localStorage.courseCache.split("|")[0]&&localStorage.courseCache.split("|").map(function(d){b.main.chosen.add(d)})}(CORE);
CORE.main.term=function(b){$.get({url:"/g/currentTerms",json:!0,done:function(d){d=d.filter(function(a){return 1==a.available});b.main.term.currentTerm=d[0].term;b.main.term.currentYear=d[0].year;[].forEach.call(document.getElementsByClassName("seasonIcon"),function(a){parseInt(a.getAttribute("data-termid"))==d[0].term&&a.classList.add("activeTermIcon")})}});return{currentTerm:0,currentYear:0}}(CORE);